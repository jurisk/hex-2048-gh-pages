(this["webpackJsonphex-2048"]=this["webpackJsonphex-2048"]||[]).push([[0],{35:function(n,t,e){},36:function(n,t,e){},38:function(n,t,e){"use strict";e.r(t);var r=e(3),a=e(1),c=e.n(a),u=e(14),o=e.n(u),A=e(11),i=e(10),q="hex-2048/new-level",s="hex-2048/move",f="hex-2048/new-state";function l(n){return{type:s,payload:n}}function d(n){return{type:f,payload:n}}var v,h=e(5);!function(n){n.NW="NW",n.NE="NE",n.N="N",n.S="S",n.SW="SW",n.SE="SE"}(v||(v={}));var p=[v.NW,v.NE,v.N,v.S,v.SW,v.SE],b=e(9),m=function(n){return b.b(Object(h.a)(n))},x=function(n){return function(t){return m(n(m(t)))}};function j(n,t){b.a(-n,n).forEach((function(n){return t(n)}))}function y(){return performance.now()}function w(n,t,e,r,a){return n<t?r:n>e?a:r+(n-t)/(e-t)*(a-r)}function O(n){return{r:parseInt(n.slice(1,3),16),g:parseInt(n.slice(3,5),16),b:parseInt(n.slice(5,7),16),a:1}}function E(n){return"rgba(".concat(Math.round(n.r),", ").concat(Math.round(n.g),", ").concat(Math.round(n.b),", ").concat(n.a,")")}function g(n,t,e){var r=O(n),a=O(e),c=function(n){return n(r)*t+n(a)*(1-t)};return E({r:c((function(n){return n.r})),g:c((function(n){return n.g})),b:c((function(n){return n.b})),a:c((function(n){return n.a}))})}var S=e(13),M=e(7),C=e(2);function k(n,t,e){if(n+t+e===0)return{x:n,y:t,z:e};throw new Error("Inconsistent cube coordinates - ".concat(n," ").concat(t," ").concat(e))}var N=k(0,0,0);function z(n){return n.x+"_"+n.y+"_"+n.z}function Q(n){var t=n.split("_");if(3!==t.length)throw new Error("Failed to parse ".concat(n));return k(Number(t[0]),Number(t[1]),Number(t[2]))}function F(n){return 0===n.x&&0===n.y&&0===n.z?C.c:0===n.x?C.d(n.y>0?v.N:v.S):0===n.y?C.d(n.x>0?v.NE:v.SW):0===n.z?C.d(n.y>0?v.NW:v.SE):C.c}var I=Math.abs;function B(n,t){var e=Object(S.a)();return j(n,(function(r){j(n,(function(a){j(n,(function(n){if(r+a+n===0){var c=k(r,a,n),u=z(c),o=t(c);e=e.set(u,o)}}))}))})),{size:n,data:e}}function P(n,t){return r=t,(I((e=N).x-r.x)+I(e.y-r.y)+I(e.z-r.z))/2<=n.size;var e,r}function D(n,t,e){var r=n;return b.a(-n.size,n.size).forEach((function(a){var c=[],u=[];b.a(-n.size,n.size).forEach((function(t){var r=e(a,t,-a-t),o=function(n,t){var e=n.data.get(z(t));return void 0===e?M.none:M.some(e)}(n,r);M.map((function(n){c.push(n),u.push(t)}))(o)}));var o=t(c);u.forEach((function(n,t){var c=e(a,n,-a-n);r=K(r,c,(function(){return o[t]}))}))})),r}function V(n,t){return D(n,t,(function(n,t,e){return k(n,e,t)}))}function J(n,t){return D(n,t,(function(n,t,e){return k(e,n,t)}))}function W(n,t){return D(n,t,(function(n,t,e){return k(t,e,n)}))}function K(n,t,e){if(P(n,t))return{size:n.size,data:n.data.update(z(t),(function(n){return e(n)}))};throw new Error("Cannot update ".concat(t," as it is out of bounds for ").concat(n))}function R(n,t){return U(n,(function(n,e){return[t(n,e)]}))}function U(n,t){return b.a(-n.size,n.size).flatMap((function(e){return b.a(-n.size,n.size).flatMap((function(r){return b.a(-n.size,n.size).flatMap((function(a){if(e+r+a===0){var c=k(e,r,a),u=n.data.get(z(c));if(void 0===u)throw new Error("Expected to find ".concat(c));return t(c,u)}return[]}))}))}))}function L(n){var t=R(n,(function(n,t){return t.value}));return Math.max.apply(Math,Object(h.a)(t))}function T(n,t){return U(n,(function(n,e){return t(e)?[n]:[]}))}var X=e(40),Y=e(6);function G(n,t){return{array:[].concat(Object(h.a)(n.array),Object(h.a)(t.array))}}function H(n,t,e){var r=$(e),a=$(r),c=n.data.map((function(n){return n.id})).toSet(),u=t.data.map((function(n){return n.id})).toSet(),o=c.subtract(u),A=u.subtract(c),i=c.intersect(u),q=U(n,(function(n,t){return o.contains(t.id)?[{kind:"CellRemoved",coords:n,cell:t,timer:e}]:[]})),s=U(t,(function(n,t){return A.contains(t.id)?[{kind:"CellAdded",coords:n,cell:t,timer:a}]:[]})),f=U(n,(function(n,e){if(i.contains(e.id)){var a=t.data.findEntry((function(n){return n.id===e.id}));if(a){var c=Object(Y.a)(a,2),u=c[0];c[1];return[{kind:"CellMoved",cell:e,oldCoords:n,newCoords:Q(u),timer:r}]}return[]}return[]}));return{array:[].concat(Object(h.a)(q),Object(h.a)(s),Object(h.a)(f))}}function Z(n,t){return{array:R(n,(function(n,e){return{kind:"CellAdded",coords:n,cell:e,timer:t}}))}}function _(n,t){var e=n.array.filter((function(n){return"CellRemoved"===n.kind&&$(n.timer)>t})).map((function(n){return n.cell.id}));return{array:n.array.filter((function(n){return!e.includes(n.cell.id)}))}}function $(n){return n+250}function nn(){return tn(en)}function tn(n){return{id:Object(X.a)(),value:n}}var en=0;var rn=function(n){return n.every((function(n){return 0===n.value}))};function an(n){if(0===n.length)return n;if(rn(n))return n;var t=n[0],e=n.slice(1);if(0===t.value)return[].concat(Object(h.a)(an(e)),[nn()]);if(0===e.length)return[t];if(rn(e))return[t].concat(Object(h.a)(e));var r=e[0],a=e.slice(1);return 0===r.value?an([t].concat(Object(h.a)(a),[nn()])):t.value===r.value?[tn(t.value+1)].concat(Object(h.a)(an(a)),[nn()]):[t].concat(Object(h.a)(an(e)))}var cn=function(n,t){return function(n,t,e){switch(t){case v.NW:return W(n,e);case v.SE:return W(n,x(e));case v.N:return V(n,e);case v.S:return V(n,x(e));case v.NE:return J(n,e);case v.SW:return J(n,x(e))}}(n,t,an)};function un(n,t,e){var r=cn(n,t);return[r,H(n,r,e)]}function on(n){return n?"".concat(Math.pow(2,n)):""}function An(n){return p.every((function(t){return cn(n,t).data.equals(n.data)}))}var qn={board:C.c,drawEvents:{array:[]},maxNumberSeen:en,gameOver:!1,moves:0};var sn=e(4),fn=e.n(sn),ln=e(8),dn=new Audio("data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU1LjEyLjEwMAAAAAAAAAAAAAAA//uQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAAcAAAAIAAAOsAA4ODg4ODg4ODg4ODhVVVVVVVVVVVVVVVVxcXFxcXFxcXFxcXFxjo6Ojo6Ojo6Ojo6OqqqqqqqqqqqqqqqqqsfHx8fHx8fHx8fHx+Pj4+Pj4+Pj4+Pj4+P///////////////9MYXZmNTUuMTIuMTAwAAAAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uQRAAAAn4Tv4UlIABEwirzpKQADP4RahmJAAGltC3DIxAAFDiMVk6QoFERQGCTCMA4AwLOADAtYEAMBhy4rBAwIwDhtoKAgwoxw/DEQOB8u8McQO/1Agr/5SCDv////xAGBOHz4IHAfBwEAQicEAQBAEAAACqG6IAQBAEAwSIEaNHOiAUCgkJ0aOc/a6MUCgEAQDBJAuCAIQ/5cEAQOCcHAx1g+D9YPyjvKHP/E7//5QEP/+oEwf50FLgApF37Dtz3P3m1lX6yGruoixd2POMuGLxAw8AIonkGyqamRBNxHfz+XRzy1rMP1JHVDJocoFL/TTKBUe2ShqdPf+YGleouMo9zk////+r33///+pZgfb/8a5U/////9Sf////KYMp0GWFNICTXh3idEiGwVhUEjLrJkSkJ9JcGvMy4Fzg2i7UOZrE7tiDDeiZEaRTUYEfrGTUtFAeEuZk/7FC84ZrS8klnutKezTqdbqPe6Dqb3Oa//X6v///qSJJ//yybf/yPQ/nf///+VSZIqROCBrFtJgH2YMHSguW4yRxpcpql//uSZAuAAwI+Xn9iIARbC9v/57QAi/l7b8w1rdF3r239iLW6ayj8ou6uPlwdQyxrUkTzmQkROoskl/SWBWDYC1wAsGxFnWiigus1Jj/0kjgssSU1b/qNhHa2zMoot9NP/+bPzpf8p+h3f//0B4KqqclYxTrTUZ3zbNIfbxuNJtULcX62xPi3HUzD1JU8eziFTh4Rb/WYiegGIF+CeiYkqat+4UAIWat/6h/Lf/qSHs3Olz+s9//dtEZx6JLV6jFv/7//////+xeFoqoJYEE6mhA6ygs11CpXJhA8rSSQbSlMdVU6QHKSR0ewsQ3hy6jawJa7f+oApSwfBIr/1AxAQf/8nBuict8y+dE2P8ikz+Vof/0H4+k6tf0f/6v6k/////8qKjv/1BIam6gCYQjpRBQav4OKosXVrPwmU6KZNlen6a6MB5cJshhL5xsjwZrt/UdFMJkPsOkO0Qp57smlUHeDBT/+swC8hDfv8xLW50u/1r//s3Ol/V9v///S/////yYSf/8YN5mYE2RGrWXGAQDKHMZIOYWE0kNTx5qkxvtMjP/7kmQOAAMFXl5582t2YYvrnz5qbowhfX/sQa3xf6+u/Pi1uiPOmcKJXrOF5EuhYkF1Bbb/3EAiuOWJocX9kycBtMDLId5o7P+pMDYRv1/mDdaP8ul39X1X5IDHrt1o///9S/////85KVVbuCOQNeMpICJ81DqHDGVCurLAa/0EKVUsmzQniQzJVY+w7Nav+kDexOCEgN7iPiImyBmYImrmgCQAcVltnZv2IQsAXL9vqLPlSb+Qk3/6K3MFb+v//b+n////+UJW//Sc1mSKuyRZwAEkXLIQJXLBl6otp8KPhiYHYh+mEAoE+gTBfJgeNItsdG6GYPP/1FkQFHsP3IOPLtavWEOGMf/WThMwEWCpNm6y/+Y+s//OH/1/u/OGX////6v////+bCSoHMzMgsoTebSaIjVR6lKPpG7rCYWmN+jRhtGuXiHi57E0XETEM7EAUl/9IdINsg8wIAAQBmS8ipal6wx8BnH//UYhNzT9L8lH51v6m//u3IhI1r9aP///V/////0iQ//pC87YAWAKKWAQA67PwQ2iCdsikVY4Ya//+5JkC4ADTmzX+01rcFLry/8+DW/OgbNV7NINwQ6e7nTWtXLHHhydAAxwZFU1lQttM3pgMwP6lqdB/rIgABAaxBRnKSLo/cB2hFDz/9MxDiD2l6yh9RTflZKf1Jfr/RfkQYWtL6P///V/////w/icFn///7lAwJp2IBpQ4NESCKe1duJchO8QoLN+zCtDqky4WiQ5rhbUb9av+oQljfDBZdPstVJJFIMSgXUXu39EFGQG//JZus//OG/6X6Lc4l/////t/////Kx4LWYoAQABgwQAGWtOU1f5K1pzNGDvYsecfuce4LdBe8iBuZmBmVdZJVAmuCk8tt/qOi8Ax4QjgywDYEMM0dkkUkqQ1gGCpaf/nTgoQH36vpkMflE7/KRj+k/0n5DiDPS+3///qf////7JizRCya////WaGLygCl0lqppwAH1n/pGM6MCPFK7JP2qJpsz/9EfgHUN4bYUo8kVfxZDd/9ZqXSi31/WXW51D+ZG37/pNycMDbnf///+JaiWbxwJAADEAgAWBoRJquMpaxJQFeTcU+X7VxL3MGIJe//uSZBAABBVs0ftaa3BCS+udTaVvjLV5W+w1rdk5r6x89rW+Bx4xGI3LIG/dK42coANwBynnsZ4f//+t3GfrnRJKgCTLdi1m1ZprMZymUETN4tj3+//9FQEMDmX9L5qVmlaiKVfx3FJ/mH5dfphw6b////60P////qWkMQEfIZq////sMESP4H4fCE0SSBAnknkX+pZzSS2dv1KPN/6hdAJUhIjzKL1L2sDqST/+gwF//ir8REf5h35f2bmDz3//////////jAGKcREwKMQI+VWsj7qNCFp0Zk9ibgh82rKj/JEIFmShuSZMMxk6Jew7BLOh/6wWk1EaAK4nJszopGpdUYh9EYN2/0zQYYnhvJt1j1+pPzpr/TKHXs3z6WdE1N0pm/o///9f/////MpkiIiBeCALJpkgpbKFme7rvPs1/vwM0yWmeNn75xH/+BkEIWITktZ+ijXEi//nC8XQ8v9D5wez86Xv6SL/Lv5ePcrIOl////1/////84bPG1/BwAHSMrAmlSw9S3OfrGMy51bTgmVmHAFtAmCmRg2s1LzmAP/7kmQSgAM9Xs5rM2twXG2Z70IKbg09fT2nva3xgq/mtRe1ui8AFVGaC/9EawNnhihesNgE5E6kir3GVFlof+tEQEpf/rMH50lv5WPH6k2+XX4JUKRpn9Xq//+7f////x3CyAX/4LIzvDgdgAEbFbAc0rGqTO2p1zoKA22l8tFMiuo2RRBOMzZv+mUA2MiAyglI3b9ZwZ0G7jqlt/OcDIKX+/1NblSX+VKfQfP8xuJJGk7////rf////+PgXTv///1JThJJQainmySAB6imUyuVbVttUo7T4Csa821OuF88f62+CZHFnGf///mQgYIEO0SMF2NVy9NxYTdlqJ8AuS4zr//SJoTUJ+CaKKTcZvosrUPo8W/MUv0f033E9E/QpN6P///v/////WRR2mwUAYUABjabRu1vrOLKAF0kIdHjnEx/iNWo7jGn1////mApxNTJQQOU1Het/NoUFTMQs6Vja///THaGIl/0fojl8mjd/Jo8W+ZfpNpCajsz7////6kn/////WRRgDz//LD1KSTDjKOciSAKxdLx5S31uYqKIWj/+5JECgAC8V5M6g9rdFyr6Vo9rW6KtHcr5DEJQRkSpLRklSigvVc4QpmyPe9H3zHR1/in9P/8VNCMJOzYUDyVjfwHP0ZgiZt/3/+9EBnDKbegdUrckhgntHaQ9vX/X/9A/////+r/////mJ3/9ItRcoVRogAcmV9N8z0pvES8QQsKoMGXEymPQyWm6E4HQLqgpv/CZJAtYXQSwoF8e6SB56zABEoW+qgZjJAZovGr0Gl5/OjFKL3JwnaX9v7/X8y1f/////////49WAzMzEYYMZLq6CUANIqbDX7lisBIdraAEPwShTRc9WZ2vAqBc4NQ9GrUNaw0Czcrte0g1NEoiU8NFjx4NFh54FSwlOlgaCp0S3hqo8SLOh3/63f7P/KgKJxxhgGSnAFMCnIogwU5JoqBIDAuBIiNLETyFmiImtYiDTSlb8ziIFYSFv/QPC38zyxEOuPeVGHQ77r/1u/+kq49//6g4gjoVQSUMYQUSAP8PwRcZIyh2kCI2OwkZICZmaZxgnsNY8DmSCWX0idhtz3VTJSqErTSB//1X7TTTVVV//uSZB2P8xwRJ4HvYcItQlWBACM4AAABpAAAACAAADSAAAAEVf/+qCE000VVVVU0002//+qqqqummmmr///qqqppppoqqqqppppoqqATkEjIyIxBlBA5KwUEDBBwkFhYWFhUVFfiqhYWFhcVFRUVFv/Ff/xUVFRYWFpMQU1FMy45OS41qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==");function vn(){return hn.apply(this,arguments)}function hn(){return(hn=Object(ln.a)(fn.a.mark((function n(){return fn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",dn.play());case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function pn(){return Math.random()}function bn(n,t){return n.map((function(n){return{order:pn(),value:n}})).sort((function(n,t){return n.order-t.order})).map((function(n){return n.value})).slice(0,t)}function mn(){return(mn=Object(ln.a)(fn.a.mark((function n(t){var e,r,a;return fn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=T(t,(function(n){return n.value===en})),r=bn(e,2),a=pn()>.5?1:2,n.abrupt("return",r.map((function(n){return[n,a]})));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var xn,jn="localhost";function yn(n,t){return{x:n.x,y:n.y,z:n.z,value:Math.pow(t,2)}}function wn(n){var t=Math.log2(n.value);return[k(n.x,n.y,n.z),t]}function On(){return(On=Object(ln.a)(fn.a.mark((function n(t){var e;return fn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=T(t,(function(n){return n.value!==en})),n.abrupt("return",fetch("//".concat(jn,":").concat(13337,"/").concat(t.size+1),{method:"POST",body:JSON.stringify(e.map((function(n,t){return yn(n,t)}))),mode:"cors",headers:{"Content-Type":"application/json"}}).then(function(){var n=Object(ln.a)(fn.a.mark((function n(t){var e;return fn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.ok){n.next=4;break}return n.abrupt("return",t.json().catch((function(n){return console.log(n),Promise.reject(n)})));case 4:return console.log(t),n.next=7,t.text();case 7:throw e=n.sent,new Error("Network response was not ok:"+e);case 9:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()).then((function(n){return n})).then((function(n){return n.map(wn)})).catch((function(n){return console.error(n),Promise.reject(n)})));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(n){n[n.Locally=0]="Locally",n[n.Remotely=1]="Remotely"}(xn||(xn={}));var En=xn.Locally;function gn(n){switch(En){case xn.Locally:return function(n){return mn.apply(this,arguments)}(n);case xn.Remotely:return function(n){return On.apply(this,arguments)}(n)}}function Sn(n,t){return Mn.apply(this,arguments)}function Mn(){return(Mn=Object(ln.a)(fn.a.mark((function n(t,e){return fn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",gn(t).then((function(n){var r=n.map((function(n){var t=Object(Y.a)(n,2);return[t[0],tn(t[1])]})).reduce((function(n,t){var e=Object(Y.a)(t,2),r=e[0],a=e[1];return K(n,r,(function(){return a}))}),t);return[r,H(t,r,e)]})));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function Cn(){return(Cn=Object(ln.a)(fn.a.mark((function n(t){var e,r,a,c,u,o,A,i;return fn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=y(),r=B(t,nn),a=Z(r,e),n.next=5,Sn(r,$(e));case 5:return c=n.sent,u=Object(Y.a)(c,2),o=u[0],A=u[1],i=G(a,A),n.abrupt("return",{board:C.d(o),drawEvents:i,maxNumberSeen:L(o),gameOver:!1,moves:0});case 11:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function kn(){return(kn=Object(ln.a)(fn.a.mark((function n(t,e){var r,a,c,u,o,A,i,q,s,f,l,d,v,h,p,b;return fn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=y(),a=C.a((function(){throw new Error("Expected to have state")}),(function(n){return n}))(t.board),c=un(a,e,r),u=Object(Y.a)(c,2),o=u[0],A=u[1],!o.data.equals(a.data)){n.next=7;break}return n.abrupt("return",vn().then((function(){return t})));case 7:return i=L(o),q=Math.max(t.maxNumberSeen,i),s=$($(r)),n.next=12,Sn(o,s);case 12:return f=n.sent,l=Object(Y.a)(f,2),d=l[0],v=l[1],h=G(t.drawEvents,A),p=G(h,v),b=_(p,s),n.abrupt("return",{maxNumberSeen:q,board:C.d(d),drawEvents:b,gameOver:An(d),moves:t.moves+1});case 20:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var Nn=Object(A.c)({hex2048:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return t.payload;default:return n}}}),zn=Object(A.d)(Nn,Object(A.a)((function(n){return function(t){return function(e){switch(e.type){case s:return function(n,t){return kn.apply(this,arguments)}(n.getState().hex2048,e.payload).then((function(t){return n.dispatch(d(t))}));case q:return function(n){return Cn.apply(this,arguments)}(e.payload).then((function(t){return n.dispatch(d(t))}));default:return t(e)}}}}))),Qn=function(n){return n.hex2048},Fn=function(){return Object(i.b)()};function In(){var n=Fn();return Object(r.jsxs)("div",{className:"buttons has-addons",children:[Object(r.jsx)("button",{className:"button",disabled:!0,children:"New Level"}),[1,2,3,4,5].map((function(t){return Object(r.jsx)("button",{className:"button",onClick:function(){return n({type:q,payload:t})},children:t},t)}))]})}e(35);var Bn=["#D0D0D0","#B0D8A4","#CADB9E","#E4DE97","#FEE191","#FEC181","#FDA070","#FD8060","#F9715E","#F4615C","#F0525A","#EB4258"];function Pn(n){return Bn[n]||Bn[Bn.length-1]}function Dn(n){return{x:1.5*n.x,y:Math.sqrt(3)/2*n.x+Math.sqrt(3)*n.z}}function Vn(n){var t=n.coords,e=n.cell,a=F(t),c=C.a((function(){return"not-allowed"}),(function(n){return"".concat(n.toLowerCase(),"-resize")}))(a),u=Dn(t),o=2*n.boardSize+1,A=function(n){return n/o/2+.5},i=A(u.y),q=A(u.x),s=1/o*(Math.sqrt(3)/2),f=i-s/2,l=q-s/2,d=function(n){return 100*n+"%"},v={backgroundColor:Pn(e.value),cursor:c,top:d(f),left:d(l),width:d(s),height:d(s)},h=on(e.value),p=C.a((function(){}),(function(t){return function(){return n.onClick(t)}}))(a),b="".concat(Math.floor(1/o*20),"vw");return Object(r.jsx)("div",{id:e.id,"data-x":t.x,"data-y":t.y,"data-z":t.z,"data-value":h,className:"hex",style:v,onClick:p,children:Object(r.jsx)("span",{className:"hex-text",style:{fontSize:b},children:h})})}e(36);function Jn(n){var t=n.board,e=n.onClick;return Object(r.jsx)("div",{className:"hex-grid",children:R(t,(function(n,a){return Object(r.jsx)(Vn,{coords:n,cell:a,boardSize:t.size,onClick:e},a.id)}))})}function Wn(n){var t=n.draw,e=Object(a.useRef)(null),c=Object(a.useRef)(null),u=Object(a.useState)(0),o=Object(Y.a)(u,2),A=o[0],i=o[1],q=Object(a.useState)(0),s=Object(Y.a)(q,2),f=s[0],l=s[1],d=window.devicePixelRatio;function v(){c.current&&(i(c.current.clientWidth),l(c.current.clientHeight))}Object(a.useEffect)((function(){return v(),window.addEventListener("resize",v),function(){return window.removeEventListener("resize",v)}})),Object(a.useLayoutEffect)((function(){var n=e.current;if(n){var r=n.getContext("2d");if(r){var a=function n(e){return t(r,e),window.requestAnimationFrame(n)}(y());return function(){a&&window.cancelAnimationFrame(a)}}}}),[t]);var h=Math.floor(d*A),p=Math.floor(d*f),b={width:A,height:f};return Object(r.jsx)("div",{style:{width:n.width,height:n.height},ref:c,children:Object(r.jsx)("canvas",{ref:e,width:h,height:p,style:b,onMouseMove:function(t){if(n.onMouseMove&&e.current){var r=e.current.getBoundingClientRect();n.onMouseMove({x:(t.clientX-r.left)*d,y:(t.clientY-r.top)*d})}n.currentCursor&&e.current&&(e.current.style.cursor=n.currentCursor())},onClick:function(t){if(n.onClick&&e.current){var r=e.current.getBoundingClientRect();n.onClick({x:(t.clientX-r.left)*d,y:(t.clientY-r.top)*d})}}})})}var Kn=e(21),Rn=function(n,t,e){return{position:n,cell:t,opacity:e}};function Un(n,t){var e=n.array.filter((function(n){return function(n,t){switch(n.kind){case"CellAdded":case"CellMoved":return!0;case"CellRemoved":return t<=$(n.timer)}}(n,t)})).reduce((function(n,e){if(e.timer>t)return n;var r=n.get(e.cell.id);return r?e.timer>r.timer?n.set(e.cell.id,e):n:n.set(e.cell.id,e)}),Object(S.a)()).toArray();return e.sort((function(n,t){var e=Object(Y.a)(n,2),r=(e[0],e[1]),a=Object(Y.a)(t,2),c=(a[0],a[1]);return r.timer-c.timer})),e.map((function(n){var e=Object(Y.a)(n,2);e[0];return function(n,t){var e=n.timer,r=$(e);switch(n.kind){case"CellAdded":return Rn(n.coords,n.cell,w(t,e,r,0,1));case"CellMoved":var a=n.oldCoords,c=n.newCoords,u=function(n){return w(t,e,r,n(a),n(c))},o={x:u((function(n){return n.x})),y:u((function(n){return n.y})),z:u((function(n){return n.z}))};return Rn(o,n.cell,1);case"CellRemoved":return Rn(n.coords,n.cell,1-w(t,e,r,0,1))}}(e[1],t)}))}function Ln(n){var t=n.board,e=n.drawEvents,c=Object(a.useRef)({x:0,y:0}),u=Object(a.useRef)(M.none),o=Object(a.useRef)("");return Object(r.jsxs)("div",{style:{padding:"1em"},children:[Object(r.jsx)(Wn,{draw:function(n,r){var a=Un(e,r),A=n.canvas.width,i=n.canvas.height,q=Math.min(A,i),s={x:A/2,y:i/2},f=2*t.size+1,l=function(n){return w(n,-f,+f,0,q)};n.clearRect(0,0,A,i);var d="#f0f0f0";!function(n,t,e,r){n.fillStyle=r,n.beginPath(),n.arc(t.x,t.y,e/2,0,2*Math.PI),n.closePath(),n.fill()}(n,s,q,d),a.forEach((function(t){var e=t.position,r=t.cell,a=function(n){return{x:l(n.x),y:l(n.y)}}(Dn(e)),A=1/f*q,i=function(n,t){for(var e=new Path2D,r=t/2-3,a=2*Math.PI/6,c=0;c<=6;c++)e.lineTo(n.x+r*Math.cos(a*c),n.y+r*Math.sin(a*c));return e}(a,A),s=!!c.current&&n.isPointInPath(i,c.current.x,c.current.y);if(s){u.current=M.some(e);var v=F(e);o.current=M.fold((function(){return"not-allowed"}),(function(n){return"".concat(n.toLowerCase(),"-resize")}))(v)}var h=t.opacity,p=g(Pn(r.value),h,d);!function(n,t,e,r){n.beginPath(),n.lineWidth=r?6:1,n.strokeStyle=r?"#000000":"#404040",n.stroke(t),n.fillStyle=e,n.fill(t),n.closePath()}(n,i,p,s);var b=on(r.value),m=g("#010101",h,d);!function(n,t,e,r,a,c){n.fillStyle=r,n.font=Math.floor(e)+"px Monaco";var u=n.measureText(t);n.fillText(t,a-u.width/2,c+.37*e)}(n,b,A*[1,.75,.5,.4,.3][b.length]||.2,m,a.x,a.y)}));var v=y()-r;v>100&&console.log("Draw in ".concat(v," ms"))},width:"80vmin",height:"80vmin",onClick:function(){Kn.a(M.fromNullable(u.current),M.flatten,M.chain((function(n){return F(n)})),M.map((function(t){return n.onClick(t)})))},onMouseMove:function(n){c.current=n},currentCursor:function(){return o.current||""}}),R(t,(function(n,t){var e=on(t.value);return Object(r.jsx)("div",{className:"button","data-x":n.x,"data-y":n.y,"data-z":n.z,"data-value":e,style:{display:"none"},children:e},t.id)}))]})}function Tn(){var n=Fn(),t=Object(i.c)(Qn),e=t.maxNumberSeen,c=t.gameOver,u=t.moves;var o,A=Object(a.useRef)(null);function q(t){n(l(t))}Object(a.useEffect)((function(){var n;return null===(n=A.current)||void 0===n?void 0:n.focus()})),function(n){n[n.DivBased=0]="DivBased",n[n.CanvasBased=1]="CanvasBased"}(o||(o={}));var s=o.CanvasBased,f=C.a((function(){return Object(r.jsx)("div",{className:"notification is-info",children:"Select a level"})}),(function(n){switch(s){case o.DivBased:return Object(r.jsx)(Jn,{board:n,onClick:q});case o.CanvasBased:return Object(r.jsx)(Ln,{board:n,drawEvents:t.drawEvents,onClick:q})}}))(t.board);return Object(r.jsxs)("div",{ref:A,className:"container game-board",tabIndex:-1,onKeyDown:function(t){"KeyS"===t.code?n(l(v.S)):"KeyD"===t.code?n(l(v.SE)):"KeyA"===t.code?n(l(v.SW)):"KeyW"===t.code?n(l(v.N)):"KeyQ"===t.code?n(l(v.NW)):"KeyE"===t.code&&n(l(v.NE))},children:[Object(r.jsx)(In,{}),f,c?Object(r.jsx)("div",{className:"notification is-danger",children:"Game over!"}):null,Object(r.jsxs)("div",{className:"notification is-normal",children:[Object(r.jsx)("span",{className:"has-text-weight-bold",children:u}),"\xa0moves made. Maximum number seen:\xa0",Object(r.jsx)("span",{className:"has-text-weight-bold",style:{backgroundColor:Pn(e),padding:"4px"},children:on(e)||"none"})]})]})}var Xn=function(){return Object(r.jsx)("section",{className:"section",children:Object(r.jsx)(Tn,{})})};e(37);o.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(i.a,{store:zn,children:Object(r.jsx)(Xn,{})})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.51e31b5f.chunk.js.map